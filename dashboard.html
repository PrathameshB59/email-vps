<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StackPilot Monitor</title>

<style>
body{
margin:0;
background:#0f172a;
font-family:Arial;
color:white;
}
.container{
max-width:1100px;
margin:auto;
padding:20px;
}
.card{
background:#111827;
padding:20px;
border-radius:12px;
margin-bottom:20px;
box-shadow:0 0 20px rgba(0,0,0,0.4);
}
h1{
color:#38bdf8;
}
.badge{
padding:6px 12px;
border-radius:20px;
font-weight:bold;
}
.HIGH{background:#ef4444;}
.WARNING{background:#facc15;color:black;}
.SECURE{background:#22c55e;}
.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
gap:20px;
}
.small{
color:#9ca3af;
font-size:14px;
}
</style>
</head>

<body>
<div class="container">

<h1>üöÄ StackPilot VPS Dashboard</h1>
<p class="small" id="date"></p>

<div class="card">
<h2>üîê Security Status</h2>
<p>Risk Level: <span id="risk" class="badge"></span></p>
<p>Failed SSH (24h): <b id="ssh"></b></p>
<p>Top Attack IP: <b id="ip"></b></p>
</div>

<div class="grid">
<div class="card">
<h3>‚öôÔ∏è System</h3>
<p>Load: <b id="load"></b></p>
<p>CPU: <b id="cpu"></b></p>
<p>Memory: <b id="memory"></b></p>
<p>Disk: <b id="disk"></b></p>
</div>

<div class="card">
<h3>üê≥ Docker</h3>
<p id="docker"></p>
</div>

<div class="card">
<h3>üöÄ PM2</h3>
<p>Online Processes: <b id="pm2"></b></p>
</div>
</div>

</div>

<script>
async function loadData(){
const res = await fetch('metrics.json');
const data = await res.json();

document.getElementById("date").innerText = data.date;
document.getElementById("risk").innerText = data.risk;
document.getElementById("risk").className = "badge " + data.risk;
document.getElementById("ssh").innerText = data.ssh_fails;
document.getElementById("ip").innerText = data.top_ip || "None";
document.getElementById("load").innerText = data.load;
document.getElementById("cpu").innerText = data.cpu;
document.getElementById("memory").innerText = data.memory_used + " / " + data.memory_total;
document.getElementById("disk").innerText = data.disk;
document.getElementById("docker").innerText = data.docker || "No containers running";
document.getElementById("pm2").innerText = data.pm2_online;
}

loadData();
setInterval(loadData, 60000);
</script>

</body>
</html>

